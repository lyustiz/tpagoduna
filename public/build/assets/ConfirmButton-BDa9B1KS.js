import{r as c,j as r}from"./app-DZ9i8GeQ.js";import{c as fo}from"./createSvgIcon-B8392upv.js";import{T as d,I as xo}from"./Typography-CEfzL9W-.js";import{e as k,g as D,s as u,a as x,m as L,u as w,b as h,d as j}from"./DefaultPropsProvider-0U4os2XN.js";import{u as ho}from"./useTheme-CVUJkYMh.js";import{u as y}from"./useSlot-BFNUMcbd.js";import{B as Co,M as bo,F as U}from"./Modal-D4kuWZe9.js";import{P as O}from"./Paper-5t7RlIP5.js";import{u as yo}from"./useId-D-yikIoo.js";import{B as E}from"./Button-BzwndHng.js";import"./createSimplePaletteValueFilter-CHjdgL8C.js";import"./TransitionGroupContext-Q82QEm3H.js";import"./CircularProgress-BFB9IF9y.js";import"./useTheme-DDC_nhOa.js";import"./Portal-DwlSCF_M.js";import"./index-DE_fDFfP.js";function vo(o){return D("MuiDialog",o)}const R=k("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),_=c.createContext({}),So=u(Co,{name:"MuiDialog",slot:"Backdrop",overrides:(o,t)=>t.backdrop})({zIndex:-1}),ko=o=>{const{classes:t,scroll:e,maxWidth:s,fullWidth:n,fullScreen:a}=o,l={root:["root"],container:["container",`scroll${x(e)}`],paper:["paper",`paperScroll${x(e)}`,`paperWidth${x(String(s))}`,n&&"paperFullWidth",a&&"paperFullScreen"]};return j(l,vo,t)},Do=u(bo,{name:"MuiDialog",slot:"Root",overridesResolver:(o,t)=>t.root})({"@media print":{position:"absolute !important"}}),wo=u("div",{name:"MuiDialog",slot:"Container",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.container,t[`scroll${x(e.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),jo=u(O,{name:"MuiDialog",slot:"Paper",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.paper,t[`scrollPaper${x(e.scroll)}`],t[`paperWidth${x(String(e.maxWidth))}`],e.fullWidth&&t.paperFullWidth,e.fullScreen&&t.paperFullScreen]}})(L(({theme:o})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:o.breakpoints.unit==="px"?Math.max(o.breakpoints.values.xs,444):`max(${o.breakpoints.values.xs}${o.breakpoints.unit}, 444px)`,[`&.${R.paperScrollBody}`]:{[o.breakpoints.down(Math.max(o.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(o.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${o.breakpoints.values[t]}${o.breakpoints.unit}`,[`&.${R.paperScrollBody}`]:{[o.breakpoints.down(o.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${R.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Po=c.forwardRef(function(t,e){const s=w({props:t,name:"MuiDialog"}),n=ho(),a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":i,"aria-modal":p=!0,BackdropComponent:C,BackdropProps:v,children:P,className:m,disableEscapeKeyDown:S=!1,fullScreen:z=!1,fullWidth:Y=!1,maxWidth:X="sm",onBackdropClick:$,onClick:F,onClose:M,open:A,PaperComponent:q=O,PaperProps:N={},scroll:H="paper",slots:V={},slotProps:J={},TransitionComponent:K=U,transitionDuration:I=a,TransitionProps:G,...Q}=s,g={...s,disableEscapeKeyDown:S,fullScreen:z,fullWidth:Y,maxWidth:X,scroll:H},T=ko(g),W=c.useRef(),Z=f=>{W.current=f.target===f.currentTarget},oo=f=>{F&&F(f),W.current&&(W.current=null,$&&$(f),M&&M(f,"backdropClick"))},B=yo(i),to=c.useMemo(()=>({titleId:B}),[B]),eo={transition:K,...V},ro={transition:G,paper:N,backdrop:v,...J},b={slots:eo,slotProps:ro},[so,ao]=y("root",{elementType:Do,shouldForwardComponentProp:!0,externalForwardedProps:b,ownerState:g,className:h(T.root,m),ref:e}),[io,no]=y("backdrop",{elementType:So,shouldForwardComponentProp:!0,externalForwardedProps:b,ownerState:g}),[lo,co]=y("paper",{elementType:jo,shouldForwardComponentProp:!0,externalForwardedProps:b,ownerState:g,className:h(T.paper,N.className)}),[po,uo]=y("container",{elementType:wo,externalForwardedProps:b,ownerState:g,className:h(T.container)}),[mo,go]=y("transition",{elementType:U,externalForwardedProps:b,ownerState:g,additionalProps:{appear:!0,in:A,timeout:I,role:"presentation"}});return r.jsx(so,{closeAfterTransition:!0,slots:{backdrop:io},slotProps:{backdrop:{transitionDuration:I,as:C,...no}},disableEscapeKeyDown:S,onClose:M,open:A,onClick:oo,...ao,...Q,children:r.jsx(mo,{...go,children:r.jsx(po,{onMouseDown:Z,...uo,children:r.jsx(lo,{as:q,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":B,"aria-modal":p,...co,children:r.jsx(_.Provider,{value:to,children:P})})})})})});function Mo(o){return D("MuiDialogActions",o)}k("MuiDialogActions",["root","spacing"]);const To=o=>{const{classes:t,disableSpacing:e}=o;return j({root:["root",!e&&"spacing"]},Mo,t)},Wo=u("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.root,!e.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:o})=>!o.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Bo=c.forwardRef(function(t,e){const s=w({props:t,name:"MuiDialogActions"}),{className:n,disableSpacing:a=!1,...l}=s,i={...s,disableSpacing:a},p=To(i);return r.jsx(Wo,{className:h(p.root,n),ownerState:i,ref:e,...l})});function Ro(o){return D("MuiDialogContent",o)}k("MuiDialogContent",["root","dividers"]);function $o(o){return D("MuiDialogTitle",o)}const Fo=k("MuiDialogTitle",["root"]),Ao=o=>{const{classes:t,dividers:e}=o;return j({root:["root",e&&"dividers"]},Ro,t)},No=u("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.root,e.dividers&&t.dividers]}})(L(({theme:o})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(o.vars||o).palette.divider}`,borderBottom:`1px solid ${(o.vars||o).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${Fo.root} + &`]:{paddingTop:0}}}]}))),Io=c.forwardRef(function(t,e){const s=w({props:t,name:"MuiDialogContent"}),{className:n,dividers:a=!1,...l}=s,i={...s,dividers:a},p=Ao(i);return r.jsx(No,{className:h(p.root,n),ownerState:i,ref:e,...l})}),Uo=o=>{const{classes:t}=o;return j({root:["root"]},$o,t)},Eo=u(d,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(o,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Lo=c.forwardRef(function(t,e){const s=w({props:t,name:"MuiDialogTitle"}),{className:n,id:a,...l}=s,i=s,p=Uo(i),{titleId:C=a}=c.useContext(_);return r.jsx(Eo,{component:"h2",className:h(p.root,n),ownerState:i,ref:e,variant:"h6",id:a??C,...l})}),Oo=fo(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),st=({venta:o})=>{const[t,e]=c.useState(!1),[s,n]=c.useState(!1),[a,l]=c.useState(!1),[i,p]=c.useState(null),C=()=>{console.log(o),p(null),e(!0)},v=()=>{e(!1)},P=async()=>{l(!0),p(null);try{const m=await fetch("/api/confirmar-venta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ventaId:o.id})});if(!m.ok)throw new Error("Error al confirmar la venta");const S=await m.json();console.log(S),n(!0)}catch(m){p(m.message)}finally{l(!1),e(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx(xo,{onClick:C,children:r.jsx(Oo,{fontSize:"small",color:"success"})}),r.jsxs(Po,{open:t,onClose:v,children:[r.jsx(Lo,{children:"Confirmar Venta"}),r.jsxs(Io,{children:[r.jsx(d,{variant:"body1",gutterBottom:!0,children:"¿Estás seguro de que deseas Confirmar esta venta?"}),r.jsxs(d,{variant:"body2",gutterBottom:!0,children:[r.jsx("strong",{children:"Cliente:"})," ",o.tx_nombre_cliente]}),r.jsxs(d,{variant:"body2",gutterBottom:!0,children:[r.jsx("strong",{children:"Tickets:"})," ",o.mo_total_tickets]}),r.jsxs(d,{variant:"body2",gutterBottom:!0,children:[r.jsx("strong",{children:"Monto:"})," ",o.mo_total_venta,"$"]})]}),r.jsxs(Bo,{children:[r.jsx(E,{onClick:v,disabled:a,children:"Cancelar"}),r.jsx(E,{onClick:P,autoFocus:!0,disabled:a,children:a?"Confirmando...":"Sí"})]})]}),s&&r.jsx(d,{variant:"body2",color:"success",children:"Acción confirmada. Puedes mostrar aquí un mensaje o realizar otra acción."}),i&&r.jsx(d,{variant:"body2",color:"error",children:i})]})};export{st as default};
